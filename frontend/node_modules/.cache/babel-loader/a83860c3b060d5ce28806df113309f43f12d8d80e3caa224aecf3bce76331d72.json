{"ast":null,"code":"import _slicedToArray from\"/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect}from'react';import{filterByDuration,filterMovies}from'../../utils/utils';import MoviesCardList from'../MoviesCardList/MoviesCardList';import SearchForm from'../SearchForm/SearchForm';import'./SavedMovies.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SavedMovies(_ref){var savedMovies=_ref.savedMovies,onDeleteFilm=_ref.onDeleteFilm;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isShortMovies=_React$useState2[0],setIsShortMovies=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),filtredMovies=_React$useState4[0],setFiltredMovies=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),searchQeury=_React$useState6[0],setSearchQeury=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),isNotFound=_React$useState8[0],setIsNotFound=_React$useState8[1];useEffect(function(){if(localStorage.getItem('querySavedMovies')){setSearchQeury(localStorage.getItem('querySavedMovies'));}if(localStorage.getItem('isShortSavedMovies')){setIsShortMovies(JSON.parse(localStorage.getItem('isShortSavedMovies')));}},[]);useEffect(function(){if(filtredMovies.length===0){setIsNotFound(true);}else{setIsNotFound(false);}},[filtredMovies]);useEffect(function(){setFiltredMovies(isShortMovies?filterByDuration(filterMovies(savedMovies,searchQeury)):filterMovies(savedMovies,searchQeury));},[savedMovies,isShortMovies,searchQeury]);function onSearchMovies(query){setSearchQeury(query);localStorage.setItem('querySavedMovies',query);}function onFilterMovies(){setIsShortMovies(!isShortMovies);localStorage.setItem('isShortSavedMovies',!isShortMovies);}return/*#__PURE__*/_jsxs(\"section\",{className:\"saved-movies\",children:[/*#__PURE__*/_jsx(SearchForm,{onSearchMovies:onSearchMovies,isShortMovies:isShortMovies,onFilter:onFilterMovies,isSavedFilms:true,query:searchQeury,setQuery:setSearchQeury}),/*#__PURE__*/_jsx(MoviesCardList,{cards:filtredMovies,onDeleteFilm:onDeleteFilm,savedMovies:savedMovies.reverse(),isSavedFilms:true,isNotFound:isNotFound})]});}export default SavedMovies;","map":{"version":3,"names":["React","useEffect","filterByDuration","filterMovies","MoviesCardList","SearchForm","SavedMovies","savedMovies","onDeleteFilm","useState","isShortMovies","setIsShortMovies","filtredMovies","setFiltredMovies","searchQeury","setSearchQeury","isNotFound","setIsNotFound","localStorage","getItem","JSON","parse","length","onSearchMovies","query","setItem","onFilterMovies","reverse"],"sources":["/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/src/components/SavedMovies/SavedMovies.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { filterByDuration, filterMovies } from '../../utils/utils';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport SearchForm from '../SearchForm/SearchForm';\nimport './SavedMovies.scss';\n\nfunction SavedMovies({ savedMovies, onDeleteFilm }) {\n  const [isShortMovies, setIsShortMovies] = React.useState(false);\n  const [filtredMovies, setFiltredMovies] = React.useState([]);\n  const [searchQeury, setSearchQeury] = React.useState('');\n  const [isNotFound, setIsNotFound] = React.useState(false);\n\n  useEffect(() => { \n    if (localStorage.getItem('querySavedMovies')) {\n      setSearchQeury(localStorage.getItem('querySavedMovies'));\n    } \n    if (localStorage.getItem('isShortSavedMovies')) {\n      setIsShortMovies(JSON.parse(localStorage.getItem('isShortSavedMovies')));\n    } \n  }, [])\n\n  useEffect(() => {\n    if (filtredMovies.length === 0) {\n      setIsNotFound(true);\n    } else {\n      setIsNotFound(false);\n    }\n  }, [filtredMovies]);\n\n  useEffect(() => {\n    setFiltredMovies(\n      isShortMovies\n        ? filterByDuration(filterMovies(savedMovies, searchQeury))\n        : filterMovies(savedMovies, searchQeury)\n    );\n  }, [savedMovies, isShortMovies, searchQeury]);\n\n  function onSearchMovies(query) {\n    setSearchQeury(query);\n    localStorage.setItem('querySavedMovies', query);\n  }\n\n  function onFilterMovies() {\n    setIsShortMovies(!isShortMovies);\n    localStorage.setItem('isShortSavedMovies', !isShortMovies);\n  }\n\n  return (\n    <section className=\"saved-movies\">\n      <SearchForm\n        onSearchMovies={onSearchMovies}\n        isShortMovies={isShortMovies}\n        onFilter={onFilterMovies}\n        isSavedFilms={true}\n        query={searchQeury}\n        setQuery={setSearchQeury}\n      />\n      <MoviesCardList\n        cards={filtredMovies}\n        onDeleteFilm={onDeleteFilm}\n        savedMovies={savedMovies.reverse()}\n        isSavedFilms={true}\n        isNotFound={isNotFound}\n      />\n    </section>\n  );\n}\n\nexport default SavedMovies;\n"],"mappings":"2JAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,gBAAgB,CAAEC,YAAY,KAAQ,mBAAmB,CAClE,MAAOC,eAAc,KAAM,kCAAkC,CAC7D,MAAOC,WAAU,KAAM,0BAA0B,CACjD,MAAO,oBAAoB,CAAC,wFAE5B,QAASC,YAAW,MAAgC,IAA7BC,YAAW,MAAXA,WAAW,CAAEC,YAAY,MAAZA,YAAY,CAC9C,oBAA0CR,KAAK,CAACS,QAAQ,CAAC,KAAK,CAAC,oDAAxDC,aAAa,qBAAEC,gBAAgB,qBACtC,qBAA0CX,KAAK,CAACS,QAAQ,CAAC,EAAE,CAAC,qDAArDG,aAAa,qBAAEC,gBAAgB,qBACtC,qBAAsCb,KAAK,CAACS,QAAQ,CAAC,EAAE,CAAC,qDAAjDK,WAAW,qBAAEC,cAAc,qBAClC,qBAAoCf,KAAK,CAACS,QAAQ,CAAC,KAAK,CAAC,qDAAlDO,UAAU,qBAAEC,aAAa,qBAEhChB,SAAS,CAAC,UAAM,CACd,GAAIiB,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CAAE,CAC5CJ,cAAc,CAACG,YAAY,CAACC,OAAO,CAAC,kBAAkB,CAAC,CAAC,CAC1D,CACA,GAAID,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAAE,CAC9CR,gBAAgB,CAACS,IAAI,CAACC,KAAK,CAACH,YAAY,CAACC,OAAO,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAC1E,CACF,CAAC,CAAE,EAAE,CAAC,CAENlB,SAAS,CAAC,UAAM,CACd,GAAIW,aAAa,CAACU,MAAM,GAAK,CAAC,CAAE,CAC9BL,aAAa,CAAC,IAAI,CAAC,CACrB,CAAC,IAAM,CACLA,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAAE,CAACL,aAAa,CAAC,CAAC,CAEnBX,SAAS,CAAC,UAAM,CACdY,gBAAgB,CACdH,aAAa,CACTR,gBAAgB,CAACC,YAAY,CAACI,WAAW,CAAEO,WAAW,CAAC,CAAC,CACxDX,YAAY,CAACI,WAAW,CAAEO,WAAW,CAAC,CAC3C,CACH,CAAC,CAAE,CAACP,WAAW,CAAEG,aAAa,CAAEI,WAAW,CAAC,CAAC,CAE7C,QAASS,eAAc,CAACC,KAAK,CAAE,CAC7BT,cAAc,CAACS,KAAK,CAAC,CACrBN,YAAY,CAACO,OAAO,CAAC,kBAAkB,CAAED,KAAK,CAAC,CACjD,CAEA,QAASE,eAAc,EAAG,CACxBf,gBAAgB,CAAC,CAACD,aAAa,CAAC,CAChCQ,YAAY,CAACO,OAAO,CAAC,oBAAoB,CAAE,CAACf,aAAa,CAAC,CAC5D,CAEA,mBACE,iBAAS,SAAS,CAAC,cAAc,wBAC/B,KAAC,UAAU,EACT,cAAc,CAAEa,cAAe,CAC/B,aAAa,CAAEb,aAAc,CAC7B,QAAQ,CAAEgB,cAAe,CACzB,YAAY,CAAE,IAAK,CACnB,KAAK,CAAEZ,WAAY,CACnB,QAAQ,CAAEC,cAAe,EACzB,cACF,KAAC,cAAc,EACb,KAAK,CAAEH,aAAc,CACrB,YAAY,CAAEJ,YAAa,CAC3B,WAAW,CAAED,WAAW,CAACoB,OAAO,EAAG,CACnC,YAAY,CAAE,IAAK,CACnB,UAAU,CAAEX,UAAW,EACvB,GACM,CAEd,CAEA,cAAeV,YAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}