{"ast":null,"code":"import{API_URL}from'../config/config';import{checkResponse}from'./utils';var register=function register(email,password,name){return fetch(\"\".concat(API_URL,\"/signup\"),{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password,name:name})}).then(function(response){return checkResponse(response);});};var authorize=function authorize(email,password){return fetch(\"\".concat(API_URL,\"/signin\"),{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})}).then(checkResponse);};var getUserInfo=function getUserInfo(){return fetch(\"\".concat(API_URL,\"/users/me\"),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(checkResponse);};var getUserContent=function getUserContent(token){return fetch(\"\".concat(API_URL,\"/users/me\"),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}}).then(checkResponse);};var setUserInfo=function setUserInfo(data){return fetch(\"\".concat(API_URL,\"/users/me\"),{method:'PATCH',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({name:data.name,email:data.email})}).then(checkResponse);};var getMovies=function getMovies(){return fetch(\"\".concat(API_URL,\"/movies\"),{method:'GET',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(checkResponse);};var postMovie=function postMovie(data){return fetch(\"\".concat(API_URL,\"/movies\"),{method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify({country:data.country,director:data.director,duration:data.duration,year:data.year,description:data.description,image:\"https://api.nomoreparties.co/\".concat(data.image.url),trailerLink:data.trailerLink,thumbnail:\"https://api.nomoreparties.co/\".concat(data.image.previewUrl.split(' ')[data.id-1]),movieId:data.id.toString(),nameRU:data.nameRU,nameEN:data.nameEN})}).then(checkResponse);};var deleteMovie=function deleteMovie(id){return fetch(\"\".concat(API_URL,\"/movies/\").concat(id),{method:'DELETE',headers:{Accept:'application/json','Content-Type':'application/json',Authorization:\"Bearer \".concat(localStorage.getItem('token'))}}).then(checkResponse);};export{API_URL,register,authorize,getUserInfo,getUserContent,setUserInfo,getMovies,postMovie,deleteMovie};","map":{"version":3,"names":["API_URL","checkResponse","register","email","password","name","fetch","method","headers","Accept","body","JSON","stringify","then","response","authorize","getUserInfo","Authorization","localStorage","getItem","getUserContent","token","setUserInfo","data","getMovies","postMovie","country","director","duration","year","description","image","url","trailerLink","thumbnail","previewUrl","split","id","movieId","toString","nameRU","nameEN","deleteMovie"],"sources":["/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/src/utils/MainApi.js"],"sourcesContent":["import { API_URL } from '../config/config';\nimport { checkResponse } from './utils';\n\nconst register = (email, password, name) =>\n  fetch(`${API_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n      name,\n    }),\n  }).then((response) => checkResponse(response));\n\nconst authorize = (email, password) =>\n  fetch(`${API_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  }).then(checkResponse);\n\nconst getUserInfo = () =>\n  fetch(`${API_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n  }).then(checkResponse);\n\nconst getUserContent = (token) =>\n  fetch(`${API_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  }).then(checkResponse);\n\nconst setUserInfo = (data) =>\n  fetch(`${API_URL}/users/me`, {\n    method: 'PATCH',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n    body: JSON.stringify({\n      name: data.name,\n      email: data.email,\n    }),\n  }).then(checkResponse);\n\nconst getMovies = () =>\n  fetch(`${API_URL}/movies`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n  }).then(checkResponse);\n\nconst postMovie = (data) =>\n  fetch(`${API_URL}/movies`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n    body: JSON.stringify({\n      country: data.country,\n      director: data.director,\n      duration: data.duration,\n      year: data.year,\n      description: data.description,\n      image: `https://api.nomoreparties.co/${data.image.url}`,\n      trailerLink: data.trailerLink,\n      thumbnail: `https://api.nomoreparties.co/${data.image.previewUrl.split(' ')[data.id - 1]}`,\n      movieId: data.id.toString(),\n      nameRU: data.nameRU,\n      nameEN: data.nameEN,\n    }),\n  }).then(checkResponse);\n\nconst deleteMovie = (id) =>\n  fetch(`${API_URL}/movies/${id}`, {\n    method: 'DELETE',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${localStorage.getItem('token')}`,\n    },\n  }).then(checkResponse);\n\nexport {\n  API_URL,\n  register,\n  authorize,\n  getUserInfo,\n  getUserContent,\n  setUserInfo,\n  getMovies,\n  postMovie,\n  deleteMovie,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}