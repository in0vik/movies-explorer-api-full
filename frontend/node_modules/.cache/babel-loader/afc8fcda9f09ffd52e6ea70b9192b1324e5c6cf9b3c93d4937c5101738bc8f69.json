{"ast":null,"code":"import _defineProperty from\"/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useState}from'react';import{MINUTES_IN_HOUR,SHORT_MOVIE_DURATION}from'./constants';var checkResponse=function checkResponse(res){if(res.ok){return res.json();}return Promise.reject(\"Error: \".concat(res.status));};var filmDurationConverter=function filmDurationConverter(duration){var hours=Math.floor(duration/MINUTES_IN_HOUR);var minutes=duration%MINUTES_IN_HOUR;return\"\".concat(hours,\"h \").concat(minutes,\"m\");};function filterMovies(movies,query){if(!query){return movies;}var moviesByQuery=movies.filter(function(movie){var movieRU=String(movie.nameRU).toLowerCase().trim();var movieEN=String(movie.nameEN).toLowerCase().trim();var searchQeury=String(query).toLowerCase().trim();return movieRU.indexOf(searchQeury)!==-1||movieEN.indexOf(searchQeury)!==-1;});return moviesByQuery;}function filterByDuration(movies){return movies.filter(function(movie){return movie.duration<=SHORT_MOVIE_DURATION;});}function useFormWithValidation(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isValid=_useState6[0],setIsValid=_useState6[1];var handleChange=function handleChange(event){var target=event.target;var name=target.name;var value=target.value;setValues(_objectSpread(_objectSpread({},values),{},_defineProperty({},name,value)));setErrors(_objectSpread(_objectSpread({},errors),{},_defineProperty({},name,target.validationMessage)));setIsValid(target.closest('form').checkValidity());};var resetForm=useCallback(function(){var newValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var newErrors=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var newIsValid=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;setValues(newValues);setErrors(newErrors);setIsValid(newIsValid);},[setValues,setErrors,setIsValid]);return{values:values,handleChange:handleChange,errors:errors,isValid:isValid,resetForm:resetForm};}export{checkResponse,filmDurationConverter,filterByDuration,filterMovies,useFormWithValidation};","map":{"version":3,"names":["useCallback","useState","MINUTES_IN_HOUR","SHORT_MOVIE_DURATION","checkResponse","res","ok","json","Promise","reject","status","filmDurationConverter","duration","hours","Math","floor","minutes","filterMovies","movies","query","moviesByQuery","filter","movie","movieRU","String","nameRU","toLowerCase","trim","movieEN","nameEN","searchQeury","indexOf","filterByDuration","useFormWithValidation","values","setValues","errors","setErrors","isValid","setIsValid","handleChange","event","target","name","value","validationMessage","closest","checkValidity","resetForm","newValues","newErrors","newIsValid"],"sources":["/Users/ilyanovik/Documents/Projects/movies-explorer-api-full/frontend/src/utils/utils.js"],"sourcesContent":["import { useCallback, useState } from 'react';\nimport { MINUTES_IN_HOUR, SHORT_MOVIE_DURATION } from './constants';\n\nconst checkResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Error: ${res.status}`);\n};\n\nconst filmDurationConverter = (duration) => {\n  const hours = Math.floor(duration / MINUTES_IN_HOUR);\n  const minutes = duration % MINUTES_IN_HOUR;\n  return `${hours}h ${minutes}m`;\n};\n\nfunction filterMovies(movies, query) {\n  if (!query) {\n    return movies;\n  }\n  const moviesByQuery = movies.filter((movie) => {\n    const movieRU = String(movie.nameRU).toLowerCase().trim();\n    const movieEN = String(movie.nameEN).toLowerCase().trim();\n    const searchQeury = String(query).toLowerCase().trim();\n    return movieRU.indexOf(searchQeury) !== -1 || movieEN.indexOf(searchQeury) !== -1;\n  });\n  return moviesByQuery;\n}\n\nfunction filterByDuration(movies) {\n  return movies.filter((movie) => movie.duration <= SHORT_MOVIE_DURATION);\n}\nfunction useFormWithValidation() {\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isValid, setIsValid] = useState(false);\n\n  const handleChange = (event) => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    setValues({ ...values, [name]: value });\n    setErrors({ ...errors, [name]: target.validationMessage });\n    setIsValid(target.closest('form').checkValidity());\n  };\n\n  const resetForm = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, errors, isValid, resetForm };\n}\n\nexport {\n  checkResponse,\n  filmDurationConverter,\n  filterByDuration,\n  filterMovies,\n  useFormWithValidation,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}